{
  "name": "agents.registration",
  "version": "v1",
  "description": "Agent announces itself to the kernel with system info and capabilities",
  "topic": "symbion/agents/registration@v1",
  "direction": "agent_to_kernel",
  "schema": {
    "type": "object",
    "required": ["agent_id", "hostname", "os", "architecture", "capabilities", "network", "timestamp"],
    "properties": {
      "agent_id": {
        "type": "string",
        "description": "Unique agent identifier (MAC address without colons)",
        "pattern": "^[a-fA-F0-9]{12}$"
      },
      "hostname": {
        "type": "string",
        "description": "System hostname",
        "maxLength": 255
      },
      "os": {
        "type": "string",
        "enum": ["linux", "windows", "android", "macos"],
        "description": "Operating system type"
      },
      "architecture": {
        "type": "string",
        "enum": ["x86_64", "aarch64", "arm", "i686"],
        "description": "CPU architecture"
      },
      "capabilities": {
        "type": "array",
        "description": "List of supported operations",
        "items": {
          "type": "string",
          "enum": [
            "power_management",
            "process_control", 
            "command_execution",
            "system_metrics",
            "service_management",
            "file_operations"
          ]
        }
      },
      "network": {
        "type": "object",
        "required": ["primary_mac", "interfaces"],
        "properties": {
          "primary_mac": {
            "type": "string",
            "pattern": "^[a-fA-F0-9]{2}:[a-fA-F0-9]{2}:[a-fA-F0-9]{2}:[a-fA-F0-9]{2}:[a-fA-F0-9]{2}:[a-fA-F0-9]{2}$",
            "description": "Primary network interface MAC address"
          },
          "interfaces": {
            "type": "array",
            "items": {
              "type": "object",
              "required": ["name", "mac", "ip"],
              "properties": {
                "name": {
                  "type": "string",
                  "description": "Interface name (eth0, wlan0, etc.)"
                },
                "mac": {
                  "type": "string", 
                  "pattern": "^[a-fA-F0-9]{2}:[a-fA-F0-9]{2}:[a-fA-F0-9]{2}:[a-fA-F0-9]{2}:[a-fA-F0-9]{2}:[a-fA-F0-9]{2}$"
                },
                "ip": {
                  "type": "string",
                  "description": "IPv4 address"
                },
                "type": {
                  "type": "string",
                  "enum": ["ethernet", "wireless", "loopback", "other"]
                }
              }
            }
          }
        }
      },
      "version": {
        "type": "string",
        "description": "Agent version (semver)",
        "pattern": "^\\d+\\.\\d+\\.\\d+$"
      },
      "timestamp": {
        "type": "string",
        "format": "date-time",
        "description": "Registration timestamp in ISO 8601 format"
      }
    }
  },
  "example": {
    "agent_id": "a1b2c3d4e5f6",
    "hostname": "workstation-01",
    "os": "linux", 
    "architecture": "x86_64",
    "capabilities": [
      "power_management",
      "process_control",
      "command_execution", 
      "system_metrics",
      "service_management"
    ],
    "network": {
      "primary_mac": "a1:b2:c3:d4:e5:f6",
      "interfaces": [
        {
          "name": "eth0",
          "mac": "a1:b2:c3:d4:e5:f6", 
          "ip": "192.168.1.100",
          "type": "ethernet"
        },
        {
          "name": "wlan0",
          "mac": "a1:b2:c3:d4:e5:f7",
          "ip": "192.168.1.101", 
          "type": "wireless"
        }
      ]
    },
    "version": "1.0.0",
    "timestamp": "2025-09-01T10:30:00Z"
  }
}